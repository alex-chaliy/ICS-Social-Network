<title>Новость</title>

<ng-include class="" src="'components/partials/header.html'"></ng-include>

<div class="container l-950 m-full changeable-onMenuOpen">
	<div class="postPage row">
		<div class="actionStatus black-text center-align">{{actionStatus}}</div>
		<div id="post-{{post._id}}" class="card post">
			<div class="authorBlock">
				<a class="authorBlock-img" href="/#/user?user_id={{post.creator._id}}">
					<img ng-src="{{post.creator.imgUrl}}" alt="">
				</a>
				<div class="authorBlock-authorAndDate">
					<a class="authorBlock-name" href="/#/user?user_id={{post.creator._id}}">
						<span> {{post.creator.name}} {{post.creator.surName}} </span>
					</a>
					<span class="authorBlock-date" href="">
						<span> {{post.creationDate | date:'dd MMM, HH:mm'}} </span>
					</span>
				</div>

				<button ng-focus="ui.toggleClass('dropdown-' + post._id, 'active')" ng-blur="ui.toggleClass('dropdown-' + post._id, 'active', 100)" class="authorBlock-moreBtn waves-effect waves-light">
					<i class="material-icons"> more_vert </i>

					<ul id="dropdown-{{post._id}}" class="dropdownContent">
						<li> <a href="/#/post?post_id={{post._id}}"> <span> Читать далее </span> </a> </li>
						<li ng-click="deletePost(post._id, loggedUser.token)" ng-if="loggedUser.role==='admin' || loggedUser.role==='moderator'"> <span> Удалить новость </span> </li>
					</ul>
				</button>
			</div>

			<div class="postPage-titleWrapper">
				<div class="postPage-titleContent valign-wrapper">
					<h3 class="postPage-title valign"> 
						<a href="/#/post?post_id={{post._id}}">
							<span ng-if="post.eventData" class="label">
								<span>Event <i class="material-icons">event</i></span>
							</span>
							<span ng-if="post.eventData" class="event-dateAndPlace">
								<span>{{post.eventData.date | date:'dd.MM.yyyy, HH:mm EEEE'}}, {{post.eventData.place}}</span>
							</span>
							<span>{{post.title}}</span>
						</a>
					</h3>
				</div>
			</div>

			<div class="postPage-cover">
				<img ng-src="{{post.coverImg}}" alt="">
			</div>

			<div class="card-content clearfix">
				<div class="post-tags">
					<span ng--repeat="tag in post.tags" class="post-tag"> <span>#{{tag}}</span> </span>
				</div>
				<div ng-repeat="part in post.parts">{{part}}</div>
			</div>

			<div ng-if="" class="likeAndComments">
				<div class="shareBlock txt-light">
					<i class="material-icons"> share </i>
					<span> Поделились </span>
					<span class="txt-bold"> 105 </span>
				</div>

				<button class="btnComments"> <span>Комментарии (3)</span> </button>
			</div>

			<div class="card-controls">
				<a href="{{post.eventData.registrationLink}}" ng-if="post.eventData" class="card-controls-btn btn-half waves-effect waves-light"> <span>Записаться на событие</span> </a>
			</div>
		</div>
	</div>
</div>